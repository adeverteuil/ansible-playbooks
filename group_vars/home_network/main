---
bind_localdomain: private.deverteuil.net
dhcp_static_hosts:
- {mac: "50:67:ae:f0:2d:01", ip: "192.168.13.31", name: "voip"}
dhcp_update_key: "{{ vault_dhcp_update_key }}"
dhcp_subnets:
- network: 192.168.13.0
  netmask: 255.255.255.0
  gateway: 192.168.13.1
  pool: [192.168.13.100, 192.168.13.250]
  zone: 13.168.192.in-addr.arpa.
- network: 192.168.14.0
  netmask: 255.255.255.0
  gateway: 192.168.14.1
  pool: [192.168.14.100, 192.168.14.250]
  zone: 14.168.192.in-addr.arpa.
- network: 192.168.15.0
  netmask: 255.255.255.0
  gateway: 192.168.15.1
  pool: [192.168.15.100, 192.168.15.250]
  zone: 15.168.192.in-addr.arpa.
- network: 192.168.16.0
  netmask: 255.255.255.0
  gateway: 192.168.16.1
  pool: [192.168.16.100, 192.168.16.250]
  zone: 16.168.192.in-addr.arpa.

timeserver_upstream_servers:
- ntp.private.deverteuil.net

common_resolvers: [192.168.13.8, 192.168.13.88]

router_zebra_password: "{{ vault_router_zebra_password }}"

munin_managed_switch_ip: 192.168.13.2
munin_managed_switch_community: "{{ vault_munin_managed_switch_community}}"
munin_ssh_private_key: "{{ vault_munin_ssh_private_key }}"
munin_ssh_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCs+vK1Iy2R4qPBLIzii14+DupJrBEuI9hKlcPYJKhbfaJFYXYa6J7NjQGBgpnoUWzGUcT1VfYGmhvW0a27D+9GOoWU3jihpGsm+A4/r6wqRwOCn+8yARGXAAjQ+7zOJhn81Jgp9RKg3ISybYPhumHcKXqa2xNYKLQGmY6F7QhvAC2LjyZ+gHa7xdGVquh05tGnIfB2jM8SVX1kHaTucA5YpPm6iJydgAQ1YB9zfNhCLkujgdYfyG4nt1HJXZ7GL7NgskvRB6MFu9GyrCR98hHhfdVfhLknmq9bAia8v8NMl4B3gMUkaJ98V4b+3M7nxhQ7aMKYfORfBnHScx6k1rRJ munin@electron
munin_graph_strategy: cron
munin_html_strategy: cron
openvpn_key_params:
  country: "CA"
  province: "QC"
  city: "Verdun"
  org: "deVerteuil.net"
  email: "alexandre@deverteuil.net"
  ou: ""
  size: 2048
  expire: 3650
openvpn_configs:
  - name: server
    mode: server
    proto: udp
    dev: tun0
    topology: subnet
    ifconfig: 192.168.66.1 255.255.255.0
    ifconfig_pool: 192.168.66.2 192.168.66.254 255.255.255.0
    client_to_client: yes
    push_rules:
    - route 192.168.13.0 255.255.255.0 192.168.66.1
    - dhcp-option DNS 192.168.13.8
    - dhcp-option DNS 192.168.13.88
    - dhcp-option DOMAIN private.deverteuil.net

webserver_serveradmin: alexandre@deverteuil.net
letsencrypt_email: alexandre@deverteuil.net
webserver_certificate_file: /etc/letsencrypt/live/smtp.deverteuil.net/cert.pem
webserver_certificate_keyfile: /etc/letsencrypt/live/smtp.deverteuil.net/privkey.pem
postgresql_pg_hba_lines:
- host all all web.private.deverteuil.net md5

nginx_proxy_servers:
  - name: wp-yves.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: benjamin-wp-test.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: tt-rss.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: nextcloud.deverteuil.net
    proxy_pass: 192.168.14.4
    ssl: yes
    additional_lines:
    - proxy_buffering off;
    - client_max_body_size 0;
  - name: osticket.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: kanban.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: monitoring.deverteuil.net
    proxy_pass: "{{ hostvars['zabbix']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: piwik.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: alexandre.deverteuil.net
    proxy_pass: "{{ hostvars['web']['ansible_eth1']['ipv4']['address'] }}"
    ssl: yes
  - name: grafana.deverteuil.net
    proxy_pass: "{{ hostvars['grafana']['ansible_eth0']['ipv4']['address'] }}:3000"
    ssl: yes

mysql_root_password: "{{ vault_mysql_root_password }}"
nextcloud_db_password: "{{ vault_nextcloud_db_password }}"
nextcloud_admin_password: "{{ vault_nextcloud_admin_password }}"
nextcloud_db_host: "{{ hostvars['mysql']['ansible_eth1']['ipv4']['address'] }}"
nextcloud_db_user_host: "{{ hostvars['nextcloud']['ansible_eth1']['ipv4']['address'] }}"
nextcloud_listen_address: "{{ hostvars['nextcloud']['ansible_eth1']['ipv4']['address'] }}"

zabbix_database_password: "{{ vault_zabbix_database_password }}"
zabbix_login_password: "{{ vault_zabbix_login_password }}"
zabbix_database_server: "{{ hostvars['postgresql']['ansible_eth1']['ipv4']['address'] }}"
zabbix_server: zabbix.private.deverteuil.net

kanboard_vhost_name: kanban.deverteuil.net
kanboard_database_password: "{{ vault_kanboard_database_password }}"
kanboard_mail_from: kanban@deverteuil.net
kanboard_ldap_starttls: true
kanboard_ldap_ssl_verify: false
kanboard_ldap_server: freeipa.private.deverteuil.net
kanboard_ldap_user_base_dn: cn=users,cn=accounts,dc=private,dc=deverteuil,dc=net
kanboard_ldap_bind_type: proxy
kanboard_ldap_username: uid=kanboard,cn=users,cn=accounts,dc=private,dc=deverteuil,dc=net
kanboard_ldap_password: "{{ vault_kanboard_ldap_password }}"
kanboard_ldap_user_filter: (&(uid=%s)(memberOf=cn=kanban_users,cn=groups,cn=accounts,dc=private,dc=deverteuil,dc=net))
kanboard_ldap_user_creation: true
kanboard_ldap_group_admin_dn: cn=kanban_admins,cn=groups,cn=accounts,dc=private,dc=deverteuil,dc=net
kanboard_ldap_group_manager_dn: ""
kanboard_ldap_group_provider: false
kanboard_ldap_group_base_dn: cn=groups,cn=accounts,dc=private,dc=deverteuil,dc=net
kanboard_ldap_group_filter: (&(objectClass=posixGroup)(cn=%s))
kanboard_ldap_group_user_filter: (&(objectClass=posixGroup)(member=uid=%s,cn=users,cn=accounts,dc=private,dc=deverteuil,dc=net))
kanboard_ldap_group_attribute_name: uid

piwik_database_password: "{{ vault_piwik_database_password }}"

#named_forwarders: [206.123.6.230, 199.84.54.230]
named_forwarders: [8.8.8.8, 8.8.4.4]
named_allow_recursion_ips: [127.0.0.1, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16]
named_static_zones:
- origin: kanban.deverteuil.net
  records: &my_reverse_proxy
  - {name: "",  type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "",  type: NS, rdata: ns2.private.deverteuil.net.}
  - {name: "@", type: A,  rdata: 192.168.13.11}
- origin: tt-rss.deverteuil.net
  records: *my_reverse_proxy
- origin: osticket.deverteuil.net
  records: *my_reverse_proxy
- origin: monitoring.deverteuil.net
  records: *my_reverse_proxy
- origin: piwik.deverteuil.net
  records: *my_reverse_proxy
- origin: alexandre.deverteuil.net
  records: *my_reverse_proxy
- origin: nextcloud.deverteuil.net
  records: *my_reverse_proxy
- origin: grafana.deverteuil.net
  records: *my_reverse_proxy
- origin: smtp.deverteuil.net
  records:
  - {name: "",  type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "",  type: NS, rdata: ns2.private.deverteuil.net.}
  - {name: "@", type: A,  rdata: 192.168.66.6}
- origin: alexdev.chickenkiller.com
  records:
  - {name: "",  type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "",  type: NS, rdata: ns2.private.deverteuil.net.}
  - {name: "@", type: A,  rdata: 192.168.13.5}
named_dynamic_zones:
- origin: private.deverteuil.net
  records:
  - {name: "",      type: NS, rdata: ns1}
  - {name: "",      type: NS, rdata: ns2}
  - {name: pfsense, type: A,  rdata: 192.168.13.1}
  - {name: ns1,     type: A,  rdata: 192.168.13.8}
  - {name: ns2,     type: A,  rdata: 192.168.13.88}
  - {name: dhcp,    type: A,  rdata: 192.168.15.3}
  - {name: fixion,  type: A,  rdata: 192.168.13.4}
  - {name: openvpn, type: A,  rdata: 192.168.13.6}
  - {name: smtp,    type: A,  rdata: 192.168.13.9}
  - {name: tor,     type: A,  rdata: 192.168.14.10}
  - {name: proton,  type: A,  rdata: 192.168.42.20}
  - {name: home,    type: A,  rdata: 192.168.13.5}
  - {name: _kerberos,             type: TXT, rdata: "PRIVATE.DEVERTEUIL.NET"}
  - {name: _kerberos._tcp,        type: SRV, rdata: 0 100 88 freeipa.private.deverteuil.net.}
  - {name: _kerberos-master._tcp, type: SRV, rdata: 0 100 88 freeipa.private.deverteuil.net.}
  - {name: _kpasswd._tcp,         type: SRV, rdata: 0 100 464 freeipa.private.deverteuil.net.}
  - {name: _ldap._tcp,            type: SRV, rdata: 0 100 389 freeipa.private.deverteuil.net.}
  - {name: _kerberos._udp,        type: SRV, rdata: 0 100 88 freeipa.private.deverteuil.net.}
  - {name: _kerberos-master._udp, type: SRV, rdata: 0 100 88 freeipa.private.deverteuil.net.}
  - {name: _kpasswd._udp,         type: SRV, rdata: 0 100 464 freeipa.private.deverteuil.net.}
  - {name: _ntp._udp,             type: SRV, rdata: 0 100 123 freeipa.private.deverteuil.net.}
  - {name: _kerberos._tcp,        type: SRV, rdata: 0 100 88 freeipa2.private.deverteuil.net.}
  - {name: _kerberos-master._tcp, type: SRV, rdata: 0 100 88 freeipa2.private.deverteuil.net.}
  - {name: _kpasswd._tcp,         type: SRV, rdata: 0 100 464 freeipa2.private.deverteuil.net.}
  - {name: _ldap._tcp,            type: SRV, rdata: 0 100 389 freeipa2.private.deverteuil.net.}
  - {name: _kerberos._udp,        type: SRV, rdata: 0 100 88 freeipa2.private.deverteuil.net.}
  - {name: _kerberos-master._udp, type: SRV, rdata: 0 100 88 freeipa2.private.deverteuil.net.}
  - {name: _kpasswd._udp,         type: SRV, rdata: 0 100 464 freeipa2.private.deverteuil.net.}
  - {name: _ntp._udp,             type: SRV, rdata: 0 100 123 freeipa2.private.deverteuil.net.}

- origin: 13.168.192.in-addr.arpa
  records:
  - {name: "",  type: NS,  rdata: ns1.private.deverteuil.net.}
  - {name: "",  type: NS,  rdata: ns2.private.deverteuil.net.}
  - {name: 1,   type: PTR, rdata: pfsense.private.deverteuil.net.}
  - {name: 8,   type: PTR, rdata: ns1.private.deverteuil.net.}
  - {name: 88,  type: PTR, rdata: ns2.private.deverteuil.net.}
  - {name: 4,   type: PTR, rdata: fixion.private.deverteuil.net.}
  - {name: 5,   type: PTR, rdata: home.private.deverteuil.net.}
  - {name: 6,   type: PTR, rdata: openvpn.private.deverteuil.net.}
  - {name: 9,   type: PTR, rdata: smtp.private.deverteuil.net.}
- origin: 14.168.192.in-addr.arpa
  records:
  - {name: "", type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "", type: NS, rdata: ns2.private.deverteuil.net.}
  - {name: 10,  type: PTR, rdata: tor.private.deverteuil.net.}
- origin: 15.168.192.in-addr.arpa
  records:
  - {name: "", type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "", type: NS, rdata: ns2.private.deverteuil.net.}
  - {name: 3,   type: PTR, rdata: dhcp.private.deverteuil.net.}
- origin: 16.168.192.in-addr.arpa
  records:
  - {name: "", type: NS, rdata: ns1.private.deverteuil.net.}
  - {name: "", type: NS, rdata: ns2.private.deverteuil.net.}
- origin: 42.168.192.in-addr.arpa
  records:
  - {name: "",  type: NS,  rdata: ns1.private.deverteuil.net.}
  - {name: "",  type: NS,  rdata: ns2.private.deverteuil.net.}
  - {name: 20,   type: PTR, rdata: proton.private.deverteuil.net.}
dyndns_client_fqdn: alexdev.chickenkiller.com
dyndns_client_key: "{{ vault_dyndns_client_key }}"

borg_backup_disks:
- label: backups
  uuid: 83b124a4-826e-4aa5-8e72-a540631cfea3
- label: backups2
  uuid: e0bd582e-b64f-45c8-9c79-b4539bcb0039
- label: backups3
  uuid: fd244f88-97cb-4252-8c01-733179d06b87

grafana_admin_password: "{{ vault_grafana_admin_password }}"
grafana_ldap_enabled: true
grafana_ldap_host: freeipa.private.deverteuil.net
grafana_ldap_bind_dn: uid=grafana,cn=users,cn=accounts,dc=private,dc=deverteuil,dc=net
grafana_ldap_bind_password: "{{ vault_grafana_ldap_bind_password }}"
grafana_ldap_search_filter: (uid=%s)
grafana_ldap_search_base_dns: ["cn=users,cn=accounts,dc=private,dc=deverteuil,dc=net"]
grafana_ldap_attribute_name: givenName
grafana_ldap_attribute_surname: sn
grafana_ldap_attribute_username: uid
grafana_ldap_attribute_member_of: memberOf
grafana_ldap_attribute_email: mail
grafana_ldap_group_mappings:
- group_dn: cn=grafana_admins,cn=groups,cn=accounts,dc=private,dc=deverteuil,dc=net
  org_role: Admin
- group_dn: cn=grafana_users,cn=groups,cn=accounts,dc=private,dc=deverteuil,dc=net
  org_role: Editor
